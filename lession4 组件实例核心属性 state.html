<html>
<head>
  <title>lession4 组件实例核心属性 state</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/604762 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="855"/>
<h1>lession4 组件实例核心属性 state</h1>

<div>
<span><div>1、初始化state</div><div>    </div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;!-- type要写成 text/babel --&gt;</font></div><div><font style="font-size: 12pt;">&lt;script type=&quot;text/babel&quot;&gt;</font></div><div><font style="font-size: 12pt;">    class Ppap extends React.Component{</font></div><div><font style="font-size: 12pt;">        constructor(props){</font></div><div><font style="font-size: 12pt;">            super(props)</font></div><div><font style="font-size: 12pt;">            //初始化状态</font></div><div><font style="font-size: 12pt;">            this.state={</font></div><div><font style="font-size: 12pt;">                pen:true</font></div><div><font style="font-size: 12pt;">            }</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">        render(){</font></div><div><font style="font-size: 12pt;">            //读取状态</font></div><div><font style="font-size: 12pt;">            let {pen} = this.state</font></div><div><font style="font-size: 12pt;">            return &lt;h1&gt;I have a {pen?'pen':'apple'}&lt;/h1&gt;</font></div><div><font style="font-size: 12pt;">                    </font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">    let ele = document.getElementById('myDiv')</font></div><div><font style="font-size: 12pt;">    ReactDOM.render(&lt;Ppap/&gt;,ele)</font></div><div><font style="font-size: 12pt;">&lt;/script&gt;</font></div></div><div><br/></div><div>2、事件绑定  </div><div>使用 onClick进行绑定 </div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;script type=&quot;text/babel&quot;&gt;</font></div><div><font style="font-size: 12pt;">    class Ppap extends React.Component{</font></div><div><font style="font-size: 12pt;">        constructor(props){</font></div><div><font style="font-size: 12pt;">            super(props)</font></div><div><font style="font-size: 12pt;">            this.state={</font></div><div><font style="font-size: 12pt;">                pen:true</font></div><div><font style="font-size: 12pt;">            }</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">        render(){</font></div><div><font style="font-size: 12pt;">            let {pen} = this.state</font></div><div><font style="font-size: 12pt;">            return &lt;h1 onClick={emm}&gt;I have a {pen?'pen':'apple'}&lt;/h1&gt;</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">    function emm(){</font></div><div><font style="font-size: 12pt;">        console.log('123')</font></div><div><font style="font-size: 12pt;">     </font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">    let ele = document.getElementById('myDiv')</font></div><div><font style="font-size: 12pt;">    ReactDOM.render(&lt;Ppap/&gt;,ele)</font></div><div><font style="font-size: 12pt;">&lt;/script&gt;</font></div></div><div><br/></div><div>组建中自定义方法的this指向，以及如何调用自定义函数</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;script type=&quot;text/babel&quot;&gt;</font></div><div><font style="font-size: 12pt;">    </font></div><div><font style="font-size: 12pt;">    class Ppap extends React.Component{</font></div><div><font style="font-size: 12pt;">        // 构造器只调用一次</font></div><div><font style="font-size: 12pt;">        constructor(props){</font></div><div><font style="font-size: 12pt;">            super(props)</font></div><div><font style="font-size: 12pt;">            // 初始化状态</font></div><div><font style="font-size: 12pt;">            this.state={</font></div><div><font style="font-size: 12pt;">                pen:true</font></div><div><font style="font-size: 12pt;">            }</font></div><div><font style="font-size: 12pt;">            this.change = this.emm.bind(this)</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">        // render调用n+1次</font></div><div><font style="font-size: 12pt;">        render(){</font></div><div><font style="font-size: 12pt;">            // 读取状态</font></div><div><font style="font-size: 12pt;">            let {pen} = this.state</font></div><div><font style="font-size: 12pt;">            return &lt;h1 onClick={this.change}&gt;I have a {pen?'pen':'apple'}&lt;/h1&gt;</font></div><div><font style="font-size: 12pt;">                    </font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">        // 自定义方法 触发几次调用几次</font></div><div><font style="font-size: 12pt;">        emm(){</font></div><div><font style="font-size: 12pt;">            // emm放在那里？weather的原型对象上，供实例使用</font></div><div><font style="font-size: 12pt;">            // 由于emm是作为onClick的回调，所以不是通过实例调用的，是直接调用</font></div><div><font style="font-size: 12pt;">            // 类中的方法默认开启了局部严格模式，所以emm中的this为undefined</font></div><div><font style="font-size: 12pt;">            let {pen} = this.state</font></div><div><font style="font-size: 12pt;">            console.log(pen)</font></div><div><font style="font-size: 12pt;">            // 状态不能直接更改，要借助一个内置api更改</font></div><div><font style="font-size: 12pt;">            // this.state.pen = !pen（错误方法）</font></div><div><font style="font-size: 12pt;">            // 状态需要setState进行修改,且更新是一种合并，不是替换。</font></div><div><font style="font-size: 12pt;">            this.setState({pen:!pen}</font></div><div><font style="font-size: 12pt;">            console.log(this)</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">    let ele = document.getElementById('myDiv')</font></div><div><font style="font-size: 12pt;">    ReactDOM.render(&lt;Ppap/&gt;,ele)</font></div><div><font style="font-size: 12pt;">&lt;/script&gt;</font></div></div><div><br/></div><div>获取state状态的简易写法（通常使用）</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;!-- type要写成 text/babel --&gt;</font></div><div><font style="font-size: 12pt;">&lt;script type=&quot;text/babel&quot;&gt;</font></div><div><font style="font-size: 12pt;">    class Ppap extends React.Component{</font></div><div><font style="font-size: 12pt;">    //   初始化状态</font></div><div><font style="font-size: 12pt;">        state={pen:true}</font></div><div><font style="font-size: 12pt;">        render(){</font></div><div><font style="font-size: 12pt;">            let {pen} = this.state</font></div><div><font style="font-size: 12pt;">            return &lt;h1 onClick={this.emm}&gt;I have a {pen?'pen':'apple'}&lt;/h1&gt;       </font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">        // 自定义方法--要用赋值语句的形式+箭头函数</font></div><div><font style="font-size: 12pt;">        emm=()=&gt;{</font></div><div><font style="font-size: 12pt;">            let {pen} = this.state</font></div><div><font style="font-size: 12pt;">            this.setState({pen:!pen})</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">    let ele = document.getElementById('myDiv')</font></div><div><font style="font-size: 12pt;">    ReactDOM.render(&lt;Ppap/&gt;,ele)</font></div><div><font style="font-size: 12pt;">&lt;/script&gt;</font></div></div><div><br/></div></span>
</div></body></html> 