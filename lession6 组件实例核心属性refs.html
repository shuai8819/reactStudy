<html>
<head>
  <title>lession6 组件实例核心属性refs</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/604762 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1032"/>
<h1>lession6 组件实例核心属性refs</h1>

<div>
<span><div><b>1、字符串形式的ref（官方已不推荐使用--过多的使用会有效率问题）</b></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;script type=&quot;text/babel&quot;&gt;</div><div>   </div><div>    class InputCom extends React.Component{</div><div>        showinput=()=&gt;{</div><div>            // 使用this.refs进行获取</div><div>            let ele = this.refs.input1</div><div>            alert(ele.value)</div><div>        }</div><div>        showinput2=()=&gt;{</div><div>            let ele = this.refs.input2</div><div>            alert(ele.value)</div><div>        }</div><div>        render(){</div><div>            return(</div><div>                // 使用ref进行标识</div><div>                &lt;div&gt;</div><div>                    &lt;input ref='input1' type=&quot;text&quot; placeholder='点击出提示'/&gt;</div><div>                    &lt;button onClick={this.showinput}&gt;点我点我快点我&lt;/button&gt;</div><div>                    &lt;input onBlur={this.showinput2} ref='input2' type=&quot;text&quot; placeholder='失焦出提示'/&gt;</div><div>                &lt;/div&gt;</div><div>            )</div><div>        }</div><div>    }</div><div><br/></div><div><br/></div><div>    let ele = document.getElementById('myDiv')</div><div>    ReactDOM.render(&lt;InputCom/&gt;,ele)</div><div>&lt;/script&gt;</div></div><div><br/></div><div><b>2、回调形式ref</b></div><div><span style="box-sizing: border-box; font-size: 13.6px; background-color: var(--color-neutral-muted); border-radius: 6px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(36, 41, 47); font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">我的理解： c</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(36, 41, 47); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">会接收到当前节点作为参数，</span><span style="box-sizing: border-box; font-size: 13.6px; background-color: var(--color-neutral-muted); border-radius: 6px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(36, 41, 47); font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">ref</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(36, 41, 47); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">的值为函数的返回值，也就是</span><span style="box-sizing: border-box; font-size: 13.6px; background-color: var(--color-neutral-muted); border-radius: 6px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(36, 41, 47); font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">this.input1 = c</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(36, 41, 47); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">，因此是给实例下的</span><span style="box-sizing: border-box; font-size: 13.6px; background-color: var(--color-neutral-muted); border-radius: 6px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(36, 41, 47); font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">input1</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(36, 41, 47); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">赋值</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;script type=&quot;text/babel&quot;&gt;</div><div>   </div><div>    class InputCom extends React.Component{</div><div>        showinput=()=&gt;{</div><div>            alert(this.input1.value)</div><div>        }</div><div>        showinput2=()=&gt;{</div><div>            alert(this.input2.value)</div><div>        }</div><div>        render(){</div><div>            return(</div><div>                &lt;div&gt;</div><div>                    &lt;input ref={e =&gt; this.input1 = e } type=&quot;text&quot; placeholder='点击出提示'/&gt;</div><div>                    &lt;button onClick={this.showinput}&gt;点我点我快点我&lt;/button&gt;</div><div>                    &lt;input onBlur={this.showinput2} ref={e =&gt; this.input2 = e } type=&quot;text&quot; placeholder='失焦出提示'/&gt;</div><div>                &lt;/div&gt;</div><div>            )</div><div>        }</div><div>    }</div><div><br/></div><div><br/></div><div>    let ele = document.getElementById('myDiv')</div><div>    ReactDOM.render(&lt;InputCom/&gt;,ele)</div><div>&lt;/script&gt;</div></div><div><br/></div><div><b>3、回调ref中回调执行次数</b></div><div>在使用内联回调函数定义ref的时候，在数据渲染的时候ref会执行两次 (第一次返回null第二次返回标签)（但没有问题依旧可以正常使用）</div><div><br/></div><div><b>4、createRef（官方推荐）</b></div><div><span style="color: rgb(36, 41, 47); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span>    </span>React 给我们提供了一个相应的API，它会自动的将该 DOM 元素放入实例对象中</span></div><div><span style="font-size: 12pt; color: rgb(36, 41, 47);"><span>    </span>React.createRef调用后可以返回一个容器，该容器可以存储被ref所标识的节点</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;script type=&quot;text/babel&quot;&gt;</div><div>    class Mycom extends React.Component{</div><div>        // React.createRef调用后可以返回一个容器，该容器可以存储被ref所标识的节点</div><div>        myRef = React.createRef()</div><div>        myRef2 = React.createRef()</div><div><br/></div><div><br/></div><div>        sum=()=&gt;{</div><div>            let v1 = this.myRef.current.value</div><div>            let v2 = this.myRef2.current.value</div><div>            alert( Number(v1)+Number(v2))</div><div>        }</div><div>        render(){</div><div><br/></div><div><br/></div><div>            return (</div><div>                &lt;div&gt;</div><div>                    &lt;input ref={this.myRef}  type=&quot;number&quot; /&gt;</div><div>                    &lt;span&gt;+&lt;/span&gt;    </div><div>                    &lt;input ref={this.myRef2} type=&quot;number&quot; /&gt;</div><div>                    &lt;button onClick={this.sum}&gt;计算&lt;/button&gt;</div><div>                &lt;/div&gt;</div><div><br/></div><div><br/></div><div>            )</div><div>        }</div><div>       </div><div>    }</div><div><br/></div><div><br/></div><div>    let ele = document.getElementById('myDiv')</div><div>    ReactDOM.render(&lt;Mycom/&gt;,ele)</div><div>&lt;/script&gt;</div></div><div><br/></div><div><br/></div></span>
</div></body></html> 